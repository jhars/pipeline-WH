


<script type="text/javascript">
    (function(e,t){if(e.Beans)return;var r={};var n=t.createElement("script");n.type="text/javascript";n.async=true;n.src="//www.trybeans.com/assets/static/js/lib/1.1/beans.js";
    var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s);r._q=[];function a(e){r[e]=function(){r._q.push([e].concat([].slice.call(arguments,0)))}}
    var i=["init","get","connect","authenticate","updateDisplay"]; for(var o=0;o<i.length;o++){a(i[o])} e.Beans=r})(window,document);
    Beans.init({
        id: '$iwerk',
    });
</script>

<style id="beans-page-style" type="text/css">
    
.beans-reward-reset *[beans-help*='beans']{
  display: none;
}
</style>

<div id="beans-section" class="beans-section beans-reward-reset">


  <div class="beans-header" id="beans-header">
    <h1>Rewards Program</h1>
  </div>

  <div id="beans-block-intro" style="display: none;">
    <div class="beans-intro">
      <a href="#" onclick="return Beans.connect();">Login or Register</a> to join our customer rewards program.
    </div>
  </div>

  <div id="beans-block-balance" style="display: none;">
    <h2>Balance</h2>
    <div class="beans-balance" id="beans-balance">
      You have <span id="beans-account-balance"></span>.
      <a class="beans-cta-button" href="@card_url">Go to Dashboard</a>
    </div>
  </div>

  <div id="beans-block-rules" style="display: none;">
    <h2>Rules</h2>
    <div id="beans-rule-rate" class="beans-rate">
      <span class="beans-beans_rate"></span> are worth <span class="beans-currency_symbol"></span>1
    </div>
    <ul id="beans-rule-list" class="beans-rules">
    </ul>
  </div>

  <div id="beans-block-history" style="display: none;">
    <h2>History</h2>
    <table id='beans-history' class="beans-history">
      <thead>
        <tr>
          <th class="beans-history-date">Date</th>
          <th class="beans-history-description">Description</th>
          <th class="beans-history-beans"></th>
        </tr>
      </thead>
      <tbody id='beans-history-list'>
        <tr></tr>
      </tbody>
    </table>
  </div>



  <div id="beans-block-help">
    <h2>Help</h2>
    <h3 class="beans-help-title" id="beans-help-about">What is this?</h3>
    <p>
      This is <span class="beans-company_name"></span> customer rewards program.
      It is our way to say thanks for being part of our journey.
      Our rewards program is designed to let our power customers buy at
      a discounted price or get free products.
    </p>

    <h3 class="beans-help-title" id="beans-help-redemption">How do I spend my <span class="beans-beans_name"></span>?</h3>
    <p>
      <span class="beans-beans_name" style="text-transform: capitalize"></span> can be redeemed directly on
      <a target="_blank" href="@card_website"><span class="beans-website"></span></a>
      during your purchase. The option to redeem your <span class="beans-beans_name"></span> is available on the cart page,
      just before checkout.
      
      
        You can pay up to 100% of your order with your <span class="beans-beans_name"></span>.
      
    </p>











    <h3 class="beans-help-title" id="beans-help-rules">How do I get more <span class="beans-beans_name"></span>?</h3>
    <p>Please check our list of rules for more information about how to get more <span class="beans-beans_name"></span>.</p>

    <div beans-help="beans:refer_friend_fixed,beans:refer_friend_signup,beans:refer_friend_two_sided,beans:refer_friend_percent">
      <h3 class="beans-help-title" id="beans-help-refer">How do I get <span class="beans-beans_name"></span> for referral?</h3>
      <ol>
        <li>
          Send your referral link,
          available <a href="@card_url" target="_blank">here</a>,
          to all your friends that might be interested.
        </li>
        <li>
          Make sure they accept your invitation.
          <span beans-help="beans:refer_friend_two_sided">
            Your friend will received an additional <span beans-rule_beans="beans:refer_friend_two_sided"></span>
            when joining with your invitation.
          </span>
          <span beans-help="beans:refer_friend_signup">
            You will get <span beans-rule_beans="beans:refer_friend_signup"></span> when they accept your invitation.
          </span>
        </li>
        <li beans-help="beans:refer_friend_fixed">
          As soon as they make their first purchase with a minimum value of
          <span class="beans-currency_symbol"></span><span beans-rule_settings="beans:refer_friend_fixed:minimum"></span>
          you will get <span beans-rule_beans="beans:refer_friend_fixed"></span>.
        </li>
        <li beans-help="beans:refer_friend_percent"> You will get
          a <span id="beans_refer_friend_percent_commission"></span>% commission (in <span class="beans-beans_name"></span>)
          for <span beans-rule_settings="beans:refer_friend_percent:all_purchases_str"></span> purchase they make.</li>
      </ol>
    </div>

    <div  class="beans-help-block" beans-help="beans:fb_page_like">
      <h3 class="beans-help-title" id="beans-help-fb">How do I get <span class="beans-beans_name"></span> for liking on Facebook?</h3>
      <ol>
        <li>Make sure your Facebook account is connected <a href="@card_url/settings/general/" target="_blank">here</a>.</li>
        <li>Just like our <a href="@card_url/redirect/facebook/" target="_blank">Facebook page</a>.</li>
      </ol>
      <p>
        You should get your <span class="beans-beans_name"></span> within 5 minutes.
        Note that un-liking may result in the cancellation of your credit.
      </p>
    </div>


    <div  class="beans-help-block" beans-help="beans:twitter_follow">
      <h3 class="beans-help-title" id="beans-help-twitter">How do I get <span class="beans-beans_name"></span> for following on Twitter?</h3>
      <ol>
        <li>Make sure your Twitter account is connected <a href="@card_url/settings/general/" target="_blank">here</a>.</li>
        <li>Just like our <a href="@card_url/redirect/twitter/" target="_blank">Twitter page</a>.</li>
      </ol>
      <p>
        You should get your <span class="beans-beans_name"></span> within 5 minutes.
        Note that un-following may result in the cancellation of your credit.
      </p>
    </div>

    <div  class="beans-help-block" beans-help=`"beans:birthday">
      <h3 class="beans-help-title" id="beans-help-birthday">How do I get <span class="beans-beans_name"></span> for my birthday?</h3>
      <ol>
        <li>Make sure your birthday <a href="@card_url/settings/general/" target="_blank">here</a> is correct.</li>
        <li>Wait until your birthday.</li>
        <li>You will get your <span class="beans-beans_name"></span>  on your birthday.</li>
      </ol>
    </div>

  </div>


<div class="beans-cta-bottom-div">
    <a class="beans-cta-button" href="@card_url">Go to rewards dashboard</a>
</div>

  <script>
    var beans_card, print_beans, print_rule, print_beans_account, update_rule_help,
        rule_element_tag, beans_rules_list, insert_rule,
        history_element_tag, beans_history_table, insert_history_record;

    rule_element_tag = 'div';
    history_element_tag = 'div';
    beans_rules_list = document.getElementById('beans-rule-list');
    beans_history_table = document.getElementById('beans-history-list');

    print_beans = function(beans){
      beans = beans == '?' ? '' : Math.round(beans);
      return "<span class='beans-unit' style='color:"+ beans_card.style.secondary_color+";'>" +
          beans + " "+ beans_card.beans_name + "</span>";
    };

    print_rule = function(rule){
      return  '<div class="beans-rule-icon-circle"'+
               ' style="background-color:'+beans_card.style.primary_color+';"'+
              '>' +
              '  <img class="beans-rule-image" src="'+
                      
                        rule.image.replace('rule/logo/','rule/logo/white/').replace(/\.\w+\.png/,'.png')+'" />'+
                      
              '</div>'+
              '<div class="beans-rule-text-wrapper" class="beans-clearfix">'+
              '  <span class="beans-rule-title" style="color: '+ beans_card.style.primary_color+';">'+
                  rule.title+
              '  </span>'+
              '  <span class="beans-rule-description">'+
                  rule.statement+
              '  </span>'+
              '</div>'
              +'<div style="float: none; clear: both;"></div>';
    };

    insert_rule = function (rule) {
      var line = document.createElement(rule_element_tag);
      line.className = "beans-rule-item beans-clearfix";
      line.innerHTML = print_rule(rule);
      beans_rules_list.appendChild(line);
    };

    insert_history_record = function (record) {
        var line = document.createElement(history_element_tag);
        line.className = 'beans-history-entry beans-clearfix';
        var date = new Date(record.created);
        line.innerHTML = '<div class="beans-history-description">'  + record.description + '</div> ' +
            '<div class="beans-history-date">' + date.toLocaleDateString() + '</div> ' +
            '<div class="beans-history-beans">' + print_beans(record.delta) + '</div>';
        beans_history_table.appendChild(line);
      };

    print_beans_account = function(beans){
      return beans + ' ' + beans_card.beans_name;
    };

    update_rule_help = function(rule){

        var helps = document.querySelectorAll('[beans-help*="'  + rule.uid+'"]');
        if(helps && helps.length){
          for (i = 0; i < helps.length; i++){
              if(helps[i].tagName == 'SPAN'){
                  helps[i].style.display = 'inline';
              }else if(helps[i].tagName == 'LI'){
                  helps[i].style.display = 'list-item';
              }else {
                  helps[i].style.display = 'block';
              }
          }

        }

        var rule_beans = document.querySelectorAll('[beans-rule_beans*="'  + rule.uid+'"]');
        if(rule_beans && rule_beans.length){
          for (i = 0; i < rule_beans.length; i++)
            rule_beans[i].innerHTML = rule.beans + ' '+beans_card.beans_name;
        }

        var settings = document.querySelectorAll('[beans-rule_settings*="'  + rule.uid+'"]');
        if(settings && settings.length){
          for (i = 0; i < settings.length; i++){
             var attr = settings[i].getAttribute('beans-rule_settings').split(':')[2];
            if(attr == 'minimum'){
              settings[i].innerHTML = rule.settings[attr] || '0.01';
            }
            else if(attr == 'all_purchases_str'){
              settings[i].innerHTML = rule.settings['all_purchases'] ? 'each' : 'the first';
            }
            else{
              settings[i].innerHTML = rule.settings[attr];
            }
          }
        }

        if(rule.uid == 'beans:refer_friend_percent'){
          document.getElementById('beans_refer_friend_percent_commission').innerHTML = parseInt(100.0*rule.beans/beans_card.beans_rate);
        }
    };

    var display_beans_info = function() {
      var i;

      // 1. Theme style
      
      

      // 2. Replace card attributes

      var beans_names = document.getElementsByClassName('beans-beans_name');
      if(beans_names && beans_names.length)
        for (i = 0; i < beans_names.length; i++)
          beans_names[i].innerHTML = beans_card.beans_name;

      var company_names = document.getElementsByClassName('beans-company_name');
      if(company_names && company_names.length)
        for (i = 0; i < company_names.length; i++)
          company_names[i].innerHTML = beans_card.company_name;

      var beans_rates = document.getElementsByClassName('beans-beans_rate');
      if(beans_rates && beans_rates.length)
        for (i = 0; i < beans_rates.length; i++)
          beans_rates[i].innerHTML = beans_card.beans_rate +' '+beans_card.beans_name;

      var ccy_symbols = document.getElementsByClassName('beans-currency_symbol');
      if(ccy_symbols && ccy_symbols.length)
        for (i = 0; i < ccy_symbols.length; i++)
          ccy_symbols[i].innerHTML = beans_card.currency.symbol;

      var websites = document.getElementsByClassName('beans-website');
      if(websites && websites.length)
        for (i = 0; i < websites.length; i++)
          websites[i].innerHTML = beans_card.website;

      var card_urls = document.querySelectorAll('[href*="@card_url"]');
      if(card_urls && card_urls.length)
        for (i = 0; i < card_urls.length; i++)
          card_urls[i].href = card_urls[i].getAttribute('href').replace(/@card_url/g, beans_card.url);

      var card_websites = document.querySelectorAll('[href*="@card_website"]');
      if(card_websites && card_websites.length)
        for (i = 0; i < card_websites.length; i++)
          card_websites[i].href = card_websites[i].getAttribute('href').replace(/@card_website/g, beans_card.website);

      // Rules
      Beans.get({
        method: 'rule',
        success: function(rules){
          rules.map(insert_rule);
          rules.map(update_rule_help);
        }
      });

      // History & Balance
      function display_balance_history(account){

        // Account Balance
        document.getElementById('beans-account-balance').innerHTML = print_beans_account(account.beans);

        // Account History
        Beans.get({
          method: 'account/current/history',
          success: function(records){
            records=records.sort(function(a, b){
            var d1=new Date(a.created);
            var d2=new Date(b.created);
            return d2-d1;
          }).slice(0,10);
            records.map(insert_history_record)
          }
        });

      }



      // Fetch account
      Beans.get({
        method: 'account/current',
        success: function (account) {
          display_balance_history(account);
          document.getElementById('beans-block-intro').style.display = 'none';
          document.getElementById('beans-block-balance').style.display = 'block';
          document.getElementById('beans-block-rules').style.display = 'block';
          document.getElementById('beans-block-history').style.display = 'block';
        },
        error: function(error){
          document.getElementById('beans-block-intro').style.display = 'block';
          document.getElementById('beans-block-balance').style.display = 'none';
          document.getElementById('beans-block-rules').style.display = 'block';
          document.getElementById('beans-block-history').style.display = 'none';
        }
      });
    };

    
  rule_element_tag = 'li';
  history_element_tag = 'tr';

  print_rule =  function(rule){
    return rule.statement;
  };

  insert_history_record= function (record) {
    var line = document.createElement("tr");
    var date = new Date(record.created);
    line.innerHTML = '<td class="beans-history-date">' + date.toLocaleDateString() + '</td> ' +
        '<td class="beans-history-description">'  + record.description + '</td> ' +
        '<td class="beans-history-beans">' + print_beans(record.delta) + '</td>';
    beans_history_table.appendChild(line);
  };

  print_beans_account = print_beans;


    Beans.get({
      method: 'card/current',
      success: function(data){
        beans_card=data;
        display_beans_info();
      }
    });

  </script>

</div>